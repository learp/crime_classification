The government will today hold emergency talks with the two major opposition parties on passing urgent legislation allowing witnesses to give anonymous evidence in the most serious court cases. The move comes after today's collapse of a Â£6m murder trial following last week's law lords ruling that witnesses should not be allowed to give evidence anonymously.The Old Bailey trial of two men accused of the shooting of the east London businessman Charles Butler - which had heard two months of evidence - became the first casualty of the ruling. Evidence given by an anonymous witness was a key part of the prosecution case, and it has been estimated that a further 40 cases could be affected by the ruling.The justice secretary, Jack Straw, will meet his Tory shadow, Dominic Grieve, and the shadow justice minister, Nick Herbert, at the Commons. The three held telephone conversations about the issue on Saturday, but the collapse of the Old Bailey trial led to the decision to hold face to face talks today. Senior police believe emergency legislation will have to be passed by the time parliament rises for summer recess within weeks. As such, only 28 days remain for MPs to find a solution.The home secretary, Jacqui Smith, confirmed that the government was seeking agreement with the Tories on the best way forward. She said the next move could include legislation, but she declined to say whether she believed an emergency bill would be needed. "I certainly accept, and I said some time ago, that there is a problem here that we need to solve," she added."We are working now ... to look at what we need to do to put this right."The former Surrey chief constable Bob Quick, now the head of Scotland Yard's counter-terrorism command, said the issue urgently needed resolving."The implications for the fight against organised crime and terrorism are very serious,'' he said."It's catastrophic. There is too much principle and not enough pragmatism in the criminal justice system."Judge David Paget discharged the jury in the Butler trial earlier today, telling them it had been ''derailed''.The trial had been approaching the end of the prosecution case, and the jury had heard evidence given by four witnesses under false names and behind screens.It involved the contract killing of the 50-year-old businessman, and evidence included CCTV footage of him being chased by a gunman and shot in the neck as he arrived at his home in Dagenham, east London, in 2004. He died nine months later.Douglas Johnson, 27, the alleged gunman, and 41-year-old David Austin, accused of being the getaway driver, had both denied murder.The trial had come after a four-year inquiry into the shooting and alleged police corruption."I am afraid I will have to discharge you and order a retrial in the new year,'' Paget told jurors."Last Wednesday, the House of Lords decided, in a very far-reaching judgment, that evidence from anonymous witnesses cannot be admitted."The reason for that is because of the difficulties caused to the defence if they do not know the identity of witnesses against them and are deprived of investigating why these people may be inaccurate or, worse, untruthful."Last week's ruling casts doubt on the safety of any convictions in which anonymous evidence was decisive. It is likely to affect scores of cases around the country.Solicitors for two of the four men found guilty of murdering the Birmingham teenagers Charlene Ellis and Letisha Shakespeare in 2003 have indicated that they plan to appeal.Sandra Shakespeare, Letisha's aunt, said going through the trial again would be the family's "worst nightmare"."We've just got to hope that common sense prevails and, more importantly, that justice prevails,'' she told Radio 4's World at One."In our cities, in urban areas where there are guns and gangs and total intimidation, we cannot expect a witness to go on the stand and say, with no protection for themselves or their families: 'I saw that person commit that crime.'"Paget told the jury in the Butler case it was "very regrettable" that the last two months had been a "waste of time", adding that he hoped the retrial would be more efficient."You have heard evidence from a number of witnesses which you should not have heard, and it is frankly impossible to ask you to forget that,'' he added.In the judgment, made on Wednesday, five law lords granted an appeal in the case of Iain Davis, who was convicted of killing two men after a New Year's Eve party in Hackney, east London, in 2002.They ruled that he was denied a fair trial because the witnesses who identified him as the gunman gave evidence from behind screens and their voices were distorted.